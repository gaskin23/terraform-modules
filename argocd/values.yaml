global:
  domain: argocd.devopsalp.click

configs:
  params:
    server.insecure: true

server:
  ingress:
    enabled: true
    controller: aws
    ingressClassName: alb
    annotations:
      alb.ingress.kubernetes.io/scheme: internal
      alb.ingress.kubernetes.io/healthcheck-interval-seconds: "10"
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/backend-protocol: HTTP
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":80}, {"HTTPS":443}]'
      alb.ingress.kubernetes.io/ssl-redirect: '443'
      alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-east-1:851725307340:certificate/2bcbf882-319c-406c-8d7d-1e9f0f17f908
      alb.ingress.kubernetes.io/group.name: guardian-ingress
    aws:
      serviceType: ClusterIP # <- Used with target-type: ip
      backendProtocolVersion: GRPC
  additionalApplications:
    - name: app-of-apps
      namespace: argo-cd
      additionalLabels: {}
      additionalAnnotations:
        "helm.sh/resource-policy": keep # <-- add this
      finalizers:
      - resources-finalizer.argocd.argoproj.io
      project: argocd
      source:
        repoURL: https://github.com/gaskin23/microservices-demo.git
        targetRevision: HEAD
        path: apps
        directory:
          recurse: true
      destination:
        server: https://kubernetes.default.svc
        namespace: argo-cd
      syncPolicy:
        automated:
          prune: false
          selfHeal: false
      # Applications under the root app
      apps:
      - name: microservices-demo
        path: release/kubernetes-manifests.yaml
        repoURL: https://github.com/gaskin23/microservices-demo.git

